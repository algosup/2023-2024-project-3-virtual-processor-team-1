#include <stdio.h>
#include <stdlib.h>
#include "vcpu.h"

int main() {
	i64 simpleAdd[] = {
		0B000100000000000100000000000000001110011100001001, // MOV R1, 2535
        0B001000100000000100000000000000001110011100001001, // ADD R1 , 2535
        0B100000000000000100000000000000000000000000000000, // DISP R1
        0B000000000000000000000000000000000000000000000000, // NOP
	};

    i64 simpleSub[] = {
        0B000100000000000100000000000000001110011100001001, // MOV R1, 2535
        0B001000100000000100000000000000001110011100001001, // ADD R1 , 2535
        0B001000110000000100000000000000001110011100001001, // Sub R1 , 2535
        0B100000000000000100000000000000000000000000000000, // DISP R1
        0B000000000000000000000000000000000000000000000000, // NOP
    };

    i64 simpleMul[] = {
        0B000100000000000100000000000000001110011100001001, // MOV R1, 2535
        0B001100010000000100000000000000001110011100001001, // Mul R1 , 2535
        0B100000000000000100000000000000000000000000000000, // DISP R1
        0B000000000000000000000000000000000000000000000000, // NOP
    };

    i64 simpleDiv[] = {
        0B000100000000000100000000000000001110011100001001, // MOV R1, 2535
        0B010000010000000100000000000000001110011100001001, // Div R1 , 2535
        0B100000000000000100000000000000000000000000000000, // DISP R1
        0B000000000000000000000000000000000000000000000000, // NOP
    };


	// create new cpu with the given i64 array for memory
	vcpu *c = new_vcpu(simpleAdd, 4);
    vcpu *c2 = new_vcpu(simpleSub, 5);
    vcpu *c3 = new_vcpu(simpleMul, 4);
    vcpu *c4 = new_vcpu(simpleDiv, 4);


	run_vcpu(c);
    free_vcpu(c);
    run_vcpu(c2);
    free_vcpu(c2);
    run_vcpu(c3);
    free_vcpu(c3);
    run_vcpu(c4);
    free_vcpu(c4);

	return 0;
}
